#map

:javascript
  var map = L.map('map', { center: [22, 122], maxBounds: [[90, -180], [-90, 180]] }).setView([10, 0.1], 1);

  L.tileLayer('http://{s}.tile.cloudmade.com/f644205df10c4e16a94c5c9b74438873/998/256/{z}/{x}/{y}.png', {
      attribution: 'Map data © <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://cloudmade.com">CloudMade</a>',
     maxZoom: 18,
     minZoom: 1   
  }).addTo(map);

.footer
  %iframe#soundcloud_widget{:frameborder => "no", :height => "120", :src => "http://w.soundcloud.com/player/?url=https://api.soundcloud.com/tracks/39804767&show_artwork=false&liking=false&sharing=false&auto_play=true", :width => "420"}
  %button#button Play / Pause

:javascript
  $(document).ready(function() {
      var widget = SC.Widget(document.getElementById('soundcloud_widget'));
      widget.bind(SC.Widget.Events.READY, function() {
        console.log('Ready...');
      });
      $('button').click(function() {
        widget.toggle();
    });
  });
    
  function onMarkerClick(trackId) {
    $(".track").hide();
    $("#track-" + trackId).show().find(".sc-trackslist a").click();
  };

  //calling map and setting =tview based on first track in the array
  var map = L.map('map').setView(<%= @filtered_tracks.first[:coordinates] %>, 2);

  // click on marker: popup track info and play track
  <% @filtered_tracks.each_with_index do |filtered_track, i| %>
    L.marker(<%= filtered_track[:coordinates] %>)
      .addTo(map)
      .bindPopup("<div class='top'><img src='<%= filtered_track[:user].avatar_url %>' width='80' ><p class='name'><%= filtered_track[:user].username.titleize %></p></div><a href='<%= filtered_track[:track].permalink_url %>' target='_blank'><em><%= filtered_track[:track].title %></em></a><br /><%= filtered_track[:user].city.titleize %>, <%= filtered_track[:user].country.titleize %>")
      .on("click", function(event) {
        var trackId = "<%= filtered_track[:track].id %>";
      onMarkerClick(trackId);
      })
      .on("click", function() { map.setView(<%= filtered_track[:coordinates] %>, 3);
      })
    <% if i.zero? %>
      .openPopup();
    <% end %>
  <% end %>

  function onMarkerClick(trackId) {
    $(".track").hide();
    $("#track-" + trackId).show().find(".sc-trackslist a").click();
  };

  //jquery for next button; the click function curly brackets call the div class "track"  //
  $('.next-track').click(function() { 
    alert("hi");
    $(".track").hide();
    $("#track-" + trackId).show().find(".sc-trackslist a").click();
  });
